@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix ets: <https://w3id.org/omega-x/ets/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix maia: <https://w3id.org/omega-x/Maia/> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix prop: <https://w3id.org/omega-x/ontology/Property/> .

# Mapping the entire CSV file into a single TimeSeries
<#TimeSeriesMapping>
    a rr:TriplesMap;
    rml:logicalSource [
        rml:source "TorreLidador.csv";  # Reference to your CSV file
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "maia:TimeSeries";  
        rr:class ets:TimeSeries
    ].


<#DataCollectionMapping>
    a rr:TriplesMap;
    rml:logicalSource [
        rml:source "TorreLidador.csv"; 
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "maia:DataCollection/{tstamp}";  # Each DataCollection identified by timestamp
        rr:class ets:DataCollection
    ];
    rr:predicateObjectMap [
        rr:predicate ets:collectionTime;
        rr:objectMap [ rml:reference "tstamp"] #rr:datatype xsd:dateTime ]
    ];
    rr:predicateObjectMap [
        rr:predicate ets:isElementOf;
        rr:objectMap [ rr:parentTriplesMap <#TimeSeriesMapping> ] 
    ].

<#DataPointCurrL1>
    rml:logicalSource [
        rml:source "TorreLidador.csv";  # Reference to your CSV file
        rml:referenceFormulation ql:CSV
    ];
    rr:subjectMap [
        rr:template "maia:DataPoint/CurrL1_A/{tstamp}";  # Each DataPoint identified by timestamp
        rr:class ets:DataPoint
    ];
    rr:predicateObjectMap [
        rr:predicate ets:dataValue;
        rr:objectMap [
            rml:reference "CurrL1_A";   
            rr:datatype xsd:float        
        ]
    ];
    rr:predicateObjectMap [
        rr:predicate ets:belongsTo;
        rr:objectMap [ rr:parentTriplesMap <#DataCollectionMapping> ] 
    ];
    rr:predicateObjectMap [
        rr:predicate ets:isAboutProperty;
        rr:objectMap [ rr:constant <https://w3id.org/seas/CurrL1> ]
    ].
